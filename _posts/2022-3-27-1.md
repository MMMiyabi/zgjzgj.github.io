---
layout:     post
title:      "Docker入门"
subtitle:   ""
date:       2022-3-27 13:30:00
author:     "zgj"
catalog: true
header-style: text
tags: 网站建设
---

本文参考阮一峰大大的博文（https://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html），根据自己对Docker的理解和需要，精炼而成

### 什么是Docker

Docker是一种容器化技术。

> **Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。**它是目前最流行的 Linux 容器解决方案。
>
> Docker 将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了 Docker，就不用担心环境问题。
>
> 总体来说，Docker 的接口相当简单，用户可以方便地创建和使用容器，把自己的应用放入容器。容器还可以进行版本管理、复制、分享、修改，就像管理普通的代码一样。

### Docker有什么用

这就要从环境配置的麻烦说起了。

用java开发过web项目的人都知道，想让一个应用跑起来，各种依赖和环境的配置，各种库和组件的安装，让人十分头大。捣鼓半天，在一台机器上能够稳定运行了，换一台机器，各种麻烦的操作可能就要重来一次。于是就有人想到，软件运行的环境是不是也能复制粘贴，从而从根本上解决上述难题。

确实已经有一些技术可以实现这个想法，比如说虚拟机技术

> 虚拟机（virtual machine）就是带环境安装的一种解决方案。它可以在一种操作系统里面运行另一种操作系统，比如在 Windows 系统里面运行 Linux 系统。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件，不需要了就删掉，对其他部分毫无影响。

但是应用虚拟机技术有几个缺点：

- **资源占用多**

  虚拟机会独占一部分内存和硬盘空间。它运行的时候，其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有 1MB，虚拟机依然需要几百 MB 的内存才能运行。

- **冗余步骤多**

  虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录。

- **启动慢**

  启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行。

与之相对的是Linux的容器技术。

> **Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。**或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层系统的隔离。

Linux容器的优点有：

- **启动快**

  容器里面的应用，直接就是底层系统的一个进程，而不是虚拟机内部的进程。所以，启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多。

- **资源占用少**

  容器只占用需要的资源，不占用那些没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源。

- **体积小**

  容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多。

> 总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小得多。

因此，作为Linux容器的封装，Docker具有上面提到的所有优点，Docker的主要用途如下：

- **提供一次性的环境**

  比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境。

- **提供弹性的云服务**

  因为 Docker 容器可以随开随关，很适合动态扩容和缩容。

- **组件微服务架构**

  通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构。

### Docker中的三个概念

要使用Docker的话，下面三个概念是必须理解的。

- **镜像（Image）**

  类似于虚拟机中的镜像，是一个包含有文件系统的面向Docker引擎的只读模板。任何应用程序运行都需要环境，而镜像就是用来提供这种运行环境的。例如一个Ubuntu镜像就是一个包含Ubuntu操作系统环境的模板，同理在该镜像上装上Apache软件，就可以称为Apache镜像。

- **容器（Container）**

  类似于一个轻量级的沙盒，可以将其看作一个极简的Linux系统环境（包括root权限、进程空间、用户空间和网络空间等），以及运行在其中的应用程序。Docker引擎利用容器来运行、隔离各个应用。容器是镜像创建的应用实例，可以创建、启动、停止、删除容器，各个容器之间是相互隔离的，互不影响。注意：镜像本身是只读的，容器从镜像启动时，Docker在镜像的上层创建一个可写层，镜像本身不变。

- **仓库（Repository）**

  类似于代码仓库，这里是镜像仓库，是Docker用来集中存放镜像文件的地方。注意与注册服务器（Registry）的区别：注册服务器是存放仓库的地方，一般会有多个仓库；而仓库是存放镜像的地方，一般每个仓库存放一类镜像，每个镜像利用tag进行区分，比如Ubuntu仓库存放有多个版本（12.04、14.04等）的Ubuntu镜像。

### Docker的安装

[Docker在WIndows上的安装](https://docs.docker.com/desktop/windows/install/)

值得注意的是，由于Docker是基于Linux的容器技术，所以如果在Windows上安装的话，安装过程中有一步是选择和安装你需要的Linux内核

安装完成后可以在命令行通过 docker version 查看自己的Docker信息

### Docker的使用

Docker的使用我目前还在摸索，下面是几个可供参考的资料：

https://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html

https://zhuanlan.zhihu.com/p/23599229

https://www.runoob.com/docker/docker-hello-world.html