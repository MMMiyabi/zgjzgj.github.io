---
layout:     post
title:      "Jekyll的目录结构及生成规则"
subtitle:   ""
date:       2022-3-27 14:30:00
author:     "zgj"
catalog: true
header-style: text
tags: 网站建设
---

> jekyll的核心是一个文本转换引擎。它的概念其实就是：你用你最喜欢的标记语言来写文章，可以是markdown，也可以是textile，或者就是简单的HTML，然后jekyll就会帮你套入一个或一系列的布局中。在整个过程中你可以设置url路径，你的文本在布局中显示的样式等等。这些都可以通过纯文本编辑来实现，最终生成静态页面就是你的成品了。

从官网的介绍可以看出，jekyll作为一个静态网站生成器，它的功能或者说它做的事情并不多，无非就是把你的内容根据你设置好的样式和路径呈现出来。所以，jekyll的目录其实也不复杂。我们先看看官网列出的目录结构包含哪些内容。

![](https://i.vgy.me/aZrGNC.png)

### config.yml

> 保存配置数据。很多配置选项都可以直接在命令行中进行设置，但是如果你把那些配置写在这儿，你就不用非要去记住那些命令了。

这是你网站的配置文件，可以说是最重要的内容了。在这个文件里，你可以很灵活地配置你网站的一些变量。比如你网站的url，读写路径，编译选项等等，在你需要给你的网站添加插件时，往往也需要在配置文件中加入一些信息或者开关。

### _drafts

> drafts（草稿）是未发布的文章。

如果你用jekyll做你的个人网站的话，这个文件夹一般是不需要的，因为你的草稿你就好好地放在本地就行了。如果是多人共同维护的一个网站的，比如实验室网站的话，这个文件夹可能会有所用处。

### _includes

> 你可以加载这些包含部分到你的布局或者文章中以方便重用。可以用这个标签`{% include file.ext %}`来把文件` _includes/file.ext`包含进来。

这个文件夹就很重要了，一般是存放一些需要重用的组件。在你为layouts文件夹写一些布局的时候往往要用到这些组件，正如官网所说的，这个时候你只需要用标签`{% include file.html %}`来引入这些组件就可以了。

### _layouts

> layouts（布局）是包裹在文章外部的模板。布局可以在YAML 头信息中根据不同文章进行选择。 这将在下一个部分进行介绍。标签` {{ content }}`可以将content插入页面中。

YAML头是一个为你的页面或文章进行设置的地方。layout就是其中一个经常会用到的设置项，设置的内容是你提前定义好的全局变量。但是，在最开始，你layout里可以设置的内容是空的，所以你需要在layouts文件夹里写上一些内容，作为你layout设置的变量。

### _posts

> 这里放的就是你的文章了。文件格式很重要，必须要符合: YEAR-MONTH-DAY-title.MARKUP。 永久链接可以在文章中自己定制，但是数据和标记语言都是根据文件名来确定的。

正如官网所说，就是放文章的地方。其实你也可以把草稿放在这里，只要文件名不按格式要求来就行了。

### _data

> 格式化好的网站数据应放在这里。jekyll 的引擎会自动加载在该目录下所有的 yaml 文件（后缀是 .yml, .yaml, .json 或者 .csv ）。这些文件可以经由 site.data 访问。如果有一个 members.yml文件在该目录下，你就可以通过 site.data.members 获取该文件的内容。

这个文件夹我暂时没有用到。

### _site

> 一旦 Jekyll 完成转换，就会将生成的页面放在这里（默认）。最好将这个目录放进你的 .gitignore 文件中。

这个文件夹肯定得有，但是一般不用去管它。

### .jekyll-metadata

> 该文件帮助 Jekyll 跟踪哪些文件从上次建立站点开始到现在没有被修改，哪些文件需要在下一次站点建立时重新生成。该文件不会被包含在生成的站点中。将它加入到你的 .gitignore文件可能是一个好注意。

这个文件我暂时也没有用到

### “index.html” and other HTML, Markdown, Textile files

> 如果这些文件中包含YAML头信息部分，Jekyll 就会自动将它们进行转换。当然，其他的如 .html, .markdown, .md, 或者 .textile 等在你的站点根目录下或者不是以上提到的目录中的文件也会被转换。

这就是指你单独写好的一些页面了，比如你网站的主页，时间线等等

其实，官网上列举的内容已经差不多，剩下的，可能还有一些存放资源和样式的文件夹，对这些文件夹就没有特别的要求了，只要你自己喜欢就行了。

### asset

用这个存放你网站中要用的各种资源，比如视频图片PPT等。

### css

你当然可能要自己写一些样式丰富你的网站，那么样式表就放在这个地方吧

### fonts

想更丰富多彩，字体也是不可缺少的 

### 页面生成规则

在项目文件夹(含有_config.yml)中运行jekyll build 指令后，jekyll会依次做如下几件事：

1. 加载_layout文件夹内的所有模板，并将其中的`{% include xxxx.html %} `字段按照_includes文件夹内对应文件填入

2. 遍历_post文件夹及子文件夹，对所有命名符合yyyy-mm--dd-title.md 格式的博客文件放入site.posts 变量(按时间倒序)，并对其进行解析，根据Front Matter 头的内容套入layout生成对应title的博客

3. 遍历整个项目子目录，扫描所有含Front Matter 头的文件，放入site.pages 变量并根据permalink 字段指定的URL目标位置生成index.html

4. 在生成过程中，文件中包含的Liquid脚本{{ content }} 会被解析并替换。Liquid指令 包括Object、Tag、Filter三类，其中object是变量，在解析过程中会被直接文本替换；Tag是控制流，可以做判断和循环；Filter用于对文本进一步处理
   

